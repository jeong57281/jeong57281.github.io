{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/post/food-filter-refactoring/","result":{"data":{"site":{"siteMetadata":{"nickname":"ppwag","github":"https://github.com/jeong57281","instagram":"https://www.instagram.com/j__ghy__/","gmail":"jeong5728@gmail.com","blog":"https://ipwag.tistory.com/","utterances":{"repo":"jeong57281/jeong57281.github.io","theme":"github-dark"}}},"markdownRemark":{"html":"<p>4학년 1학기 ~ 여름학기 동안 <a href=\"https://jeong57281.github.io/post/food-filter\">food filter 웹 프로젝트</a>를 진행했었다. 2학기가 다가올 때 쯤 웹 서비스가 동작이 되는 수준까지는 완료가 되었다 생각하고, 새학기에 할 다른 프로젝트를 기획하고 있었다.</p>\n<p>새로운 프로젝트 주제를 선정하고 구현에 필요한 자료들을 조사하다 <a href=\"https://github.com/woowacourse-teams/2020-taggle\">taggle</a> 이라는 프로젝트를 알게 되었는데, 내 프로젝트 구조와는 많이 달랐고 다른 프로젝트를 하기보단 기존의 프로젝트를 뜯어고쳐야겠다는 생각이 들게 되었다.</p>\n<h2 id=\"was-와-web-server-분리\" style=\"position:relative;\"><a href=\"#was-%EC%99%80-web-server-%EB%B6%84%EB%A6%AC\" aria-label=\"was 와 web server 분리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>WAS 와 Web Server 분리</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b0e36a741d2a18ac9f9d0c05ccc9cd8c/07f3a/flowchart-prev.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.4054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHt3cShf//EABcQAQEBAQAAAAAAAAAAAAAAAAERAiD/2gAIAQEAAQUCWatOP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwIi/wD/xAAZEAEAAgMAAAAAAAAAAAAAAAABECEAMaH/2gAIAQEAAT8hpMLXUoOyP//aAAwDAQACAAMAAAAQ3A//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEAAgEFAQAAAAAAAAAAAAABABFRECFBgaHR/9oACAEBAAE/EKChSK5myB2+TgvzQWgTDAAon//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flowchart-prev\"\n        title=\"flowchart-prev\"\n        src=\"/static/b0e36a741d2a18ac9f9d0c05ccc9cd8c/1c72d/flowchart-prev.jpg\"\n        srcset=\"/static/b0e36a741d2a18ac9f9d0c05ccc9cd8c/a80bd/flowchart-prev.jpg 148w,\n/static/b0e36a741d2a18ac9f9d0c05ccc9cd8c/1c91a/flowchart-prev.jpg 295w,\n/static/b0e36a741d2a18ac9f9d0c05ccc9cd8c/1c72d/flowchart-prev.jpg 590w,\n/static/b0e36a741d2a18ac9f9d0c05ccc9cd8c/07f3a/flowchart-prev.jpg 740w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이전 food filter 의 프로젝트 구조이다.</p>\n<p>서버가 동적 처리와 정적 파일 제공을 모두 하고 있다.</p>\n<p>url 주소가 이동 될 때 마다 vue-router 에 의해 정해둔 컴포넌트가 잘 렌더링 되고 있지만, 화면이 바뀔 때 마다 index.html 를 전부 불러오고 있어 spa 의 장점을 전혀 살리지 못하고 있다.</p>\n<p>정적과 동적 처리를 나누고 프론트엔드 프레임워크가 제 기능을 하도록 하기 위해 Web Server 와 WAS 를 분리할 필요가 있었다.</p>\n<h3 id=\"nginx\" style=\"position:relative;\"><a href=\"#nginx\" aria-label=\"nginx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>NGINX</h3>\n<p>vue 로 build 된 index.html 을 제공할 web server 로 nginx 를 선택했다.</p>\n<p>비동기 처리 방식인 nginx 는 reverse proxy 기능을 제공하는데 다음과 같은 장점이 있었다.</p>\n<ul>\n<li>서버 ip 를 숨겨 보안을 높일 수 있다.</li>\n<li>로드 밸런서로 WAS 의 부하를 줄일 수 있다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 526px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c4228453a00ca4b0707097e79c4106cf/2d7ab/flowchart-deployment.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.45945945945946%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVQoz5VTy0oDQRDcz/QPRA8exYseg5CTN38iP6CHmJzMyQgKUcRowDz2kdnH7CSbnZ6SnmTN5IFoQzFDw1ZXTdd6cMoYY8EVBAF83wcRQWv9Z3jbhFxMEvg+xDSCUgp5rpCr36FW2EtoSMMXM7yO8e/yKpuuXRiNcZTjzSeoBWFWmv1YLM95uf5+QyFb5abWJUSmNiaXZKAd8Gwez3e1AGglxsuyDEmS2Ad1qyIc5QGSQu5YK/QceZHZO6uklTmv2Wyi2+2i1+vZzQ6HQ4RhgDhR6IsRDu8ucdyqQxYKsYghRAxVKFzf13B1W0OYBihpqdQSttttdDodDAYDpGkKEccQsUAYJnie9HFwc46jVh2TJIRMJWQmMZmOcdY4wUXjFH3/3VoviZaEUkpEUbRlyPxYfhGf+JLBjuXnjyc8vj/Yh5yVjsLtUHObtIZIc9BOpFysi7es6ZfYEGlMU2Unc2zUgqMBJzJVnyxZ7m55X7B54/x3VLFgN2sY51wqq8j4+AbH/KFOuJd0QAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flowchart-deployment\"\n        title=\"flowchart-deployment\"\n        src=\"/static/c4228453a00ca4b0707097e79c4106cf/2d7ab/flowchart-deployment.png\"\n        srcset=\"/static/c4228453a00ca4b0707097e79c4106cf/12f09/flowchart-deployment.png 148w,\n/static/c4228453a00ca4b0707097e79c4106cf/e4a3f/flowchart-deployment.png 295w,\n/static/c4228453a00ca4b0707097e79c4106cf/2d7ab/flowchart-deployment.png 526w\"\n        sizes=\"(max-width: 526px) 100vw, 526px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code>/api</code> 와 <code>/socket</code> 으로 들어오는 모든 요청은 WAS 로 reverse proxing 해 주었고, api 서버의 응답결과에 따라 <code>$router</code> 객체를 이용하여 상태를 유지하며 페이지를 이동시켜 주었다.</p>\n<h2 id=\"vue-컴포넌트-구조-수정\" style=\"position:relative;\"><a href=\"#vue-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B5%AC%EC%A1%B0-%EC%88%98%EC%A0%95\" aria-label=\"vue 컴포넌트 구조 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vue 컴포넌트 구조 수정</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/740abd2640b5abc29a2d600ab3a428ac/d9199/vue-before.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaElEQVQoz6WTW0sDMRCF+///SyvUF/ukgm0fKmIr1pYiWvZWs7vmsrtpJpeJ7C6K9EbFIU+Z+SDnzEnHe28causAtLXW/6U6Hr0BrUrJGOOcCyGqqgKA30OIeARumr5pI6JtyjnXtpVSURRRSg/ynROvstYqpRhjRVEYY/b5zs+cMabVrADiJEk2G23quxZDxCzLwjAUQuzCqi7goqSMZ2m2CYIsTY21lYSirNoZxlgcx5zzXdg5R0i6Wr1G6/ckiqIgIIRogM0HeVuHlNLjhnkPCib3k+ubW5KmQojhaDSbTaWU0+l0OLybvyytQ+/xqGGgDaHlVgETJW9Omn3mlOnaCqeNO+524+R7EF/2+73eRRTH4/G42+0OBlfb7bYWLAop5WG4XixiQvLJw2yxXBSFCILwcfb0PF+oOnqov3dxAJZSEkLyPAdjwFgmyrJSrtFoLJ5M2F42dCMU0e2bdG7CzvgY/4C/ABIMaG1ygdWNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vue-before\"\n        title=\"vue-before\"\n        src=\"/static/740abd2640b5abc29a2d600ab3a428ac/fcda8/vue-before.png\"\n        srcset=\"/static/740abd2640b5abc29a2d600ab3a428ac/12f09/vue-before.png 148w,\n/static/740abd2640b5abc29a2d600ab3a428ac/e4a3f/vue-before.png 295w,\n/static/740abd2640b5abc29a2d600ab3a428ac/fcda8/vue-before.png 590w,\n/static/740abd2640b5abc29a2d600ab3a428ac/efc66/vue-before.png 885w,\n/static/740abd2640b5abc29a2d600ab3a428ac/d9199/vue-before.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>처음 뷰 프레임워크를 이용하여 설계했을 때는 컴포넌트를 최대한 작게 쪼갤수록 좋다는 조언에 따라, 될 수 있는대로 나누다 보니 이벤트 버스가 무분별하게 사용되었고 나중에는 설계도를 보아도 어떻게 작동하는지 잘 알아볼 수 가 없었다.</p>\n<p>그래서 이벤트 버스 사용을 줄이고 props 와 event emit 을 이용한 상하위 부모-자식 간의 통신으로 최대한 해결하도록 다시 설계했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7207587705fd48dfc82468a7c4aaf317/d9199/vue-after.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABb0lEQVQoz5VTXUsCQRT1//+HaoPSoJeKYs0eBDVfWkkwAyPxxdjUbZt2d2Z2Zu5H6Fb0sVodhoE73HMO9965FWZ2SBbQARLxv1BhYmeszqTOlNMatII8JwBmpk9YQ15lLQ8vb0IkgCLbOReGYRRFiLieXAYistYmSZJlGbzLbSIDQBzHs9lMSklExhghRJqm1loAkFIqpYwxH0JfyEqpIAhardZisWDmMAw7nU63282yjJnH43G73R4MBuXOhZvWGlYNy/NcrFCEaZrO5/M4jsvJSqmb4fC633+KokLrl1EtG2wMGsPMQojT46PDanUymbyNaqPE0pmkdELoKHJKQZLY52e01iRJobjJ+SoIfN/vXl4y4uPDw0W9fl6v341GzHw/Gp2dHDebTSFEaRWVRqPheZ7v+8w8nU739vc9b7fX6zHz7e1wa3unVjuI1rSg8u2JiI1FRCqyZe5wc80/oS2+SJtboF8Wo/xv8l9W7BU7V2JDtEj93QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"vue-after\"\n        title=\"vue-after\"\n        src=\"/static/7207587705fd48dfc82468a7c4aaf317/fcda8/vue-after.png\"\n        srcset=\"/static/7207587705fd48dfc82468a7c4aaf317/12f09/vue-after.png 148w,\n/static/7207587705fd48dfc82468a7c4aaf317/e4a3f/vue-after.png 295w,\n/static/7207587705fd48dfc82468a7c4aaf317/fcda8/vue-after.png 590w,\n/static/7207587705fd48dfc82468a7c4aaf317/efc66/vue-after.png 885w,\n/static/7207587705fd48dfc82468a7c4aaf317/d9199/vue-after.png 960w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>컴포넌트 위치를 재조정하므로써 이벤트 버스를 줄일 수 있었는데 전혀 사용하지 않을 순 없었다.</p>\n<h2 id=\"협업을-위한-개발-환경\" style=\"position:relative;\"><a href=\"#%ED%98%91%EC%97%85%EC%9D%84-%EC%9C%84%ED%95%9C-%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD\" aria-label=\"협업을 위한 개발 환경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>협업을 위한 개발 환경</h2>\n<p>food filter 프로젝트는 사실상 개발자가 나 혼자인 개인 웹 앱 프로젝트였기 때문에 꾸준히 git 을 이용한 형상관리만 할 뿐, 협업을 위한 프로젝트 구조에 대해서는 신경써보지 않았다.</p>\n<p>그런데 최근 프로젝트 리팩토링을 하며 프론트엔드와 백엔드 개발의 범위가 명확해지면서, 협업을 하게 되면 어떻게 개발이 이루어지는지 궁금해졌다.</p>\n<p>그래서 프론트와 백엔드를 따로 개발하는 것 처럼 상황을 가정한 후 개발 환경을 구성해보았다.</p>\n<h3 id=\"api-설계\" style=\"position:relative;\"><a href=\"#api-%EC%84%A4%EA%B3%84\" aria-label=\"api 설계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>API 설계</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f802cacec61a9442c6c1692432ed43c8/e619b/api.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.027027027027025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABJ0AAASdAHeZh94AAAA20lEQVQY0z2QTW4DIQyF5/4XiNRbdJtd11XXrZRNkqrRNBQwAwYyf6+yW0CykPF7n20GZkZKCXK2bcOyLCDvEAKhlKJ5q+37jhgjrLXdI0cYRKSaodaqolKqFkt94PPrG/efgMRZjaIRmETOf29tELlbY6kPknjvkVJU4IPvuH08g65HJLrBOkKKsQMF4pxTj0w6TZM26cA2Yc6MHcCcrxhPB9jzEzicQYHBnPrKYha9hMDmedYNOlAE0snJv3nCGAxeLm94te8YycBbpzVjjK62rmuftoWA4/8Wv+4ogXtfyvWLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"api\"\n        title=\"api\"\n        src=\"/static/f802cacec61a9442c6c1692432ed43c8/fcda8/api.png\"\n        srcset=\"/static/f802cacec61a9442c6c1692432ed43c8/12f09/api.png 148w,\n/static/f802cacec61a9442c6c1692432ed43c8/e4a3f/api.png 295w,\n/static/f802cacec61a9442c6c1692432ed43c8/fcda8/api.png 590w,\n/static/f802cacec61a9442c6c1692432ed43c8/e619b/api.png 787w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>백엔드 개발이 아무것도 이루어지지 않은 상태에서는 테스트를 해볼 수 없기에 프론트엔드에서는 미리 함께 설계해둔 api 에 따라 mock 서버 혹은 파일을 만들고 테스트한다.</p>\n<h3 id=\"dev-server-proxy\" style=\"position:relative;\"><a href=\"#dev-server-proxy\" aria-label=\"dev server proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Dev Server Proxy</h3>\n<p>api 개발이 진행되면 테스트해볼 수 있도록 서버에 배포한다. 프론트엔드 개발자는 dev server proxy 를 설정해, 요청이 서버가 배포되어있는 주소로 proxing 되도록하고 host 를 제외한 path 만을 이용해 http 요청한다. (실제 서버에 배포가 되면 현재 url 로 요청이 전송되고 <code>/api</code> 요청의 경우 nginx 에서 이를 reverse proxing 한다.)</p>\n<deckgo-highlight-code language=\"js\" theme=\"material\"  >\n          <code slot=\"code\">// 예시\r\naxios.get(&#39;/api/maps&#39;, {\r\n})\r\n.then((res) =&gt; {\r\n})\r\n.catch((err) =&gt; {\r\n})</code>\n        </deckgo-highlight-code>\n<h3 id=\"cicd\" style=\"position:relative;\"><a href=\"#cicd\" aria-label=\"cicd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CI/CD</h3>\n<p>CI/CD 툴로 사용하기 편리한 git actions 을 사용하였는데</p>\n<ul>\n<li>CI(Continuous Integration) 지속적 통합 : 개발자가 나 혼자라 겪어볼 수 없었다.</li>\n<li>CD(Continuous Delivery &#x26; Deployment) 지속적 전달 &#x26; 배포 : 배포를 자동화하고 slack 으로 알림이 가도록 설정했다.</li>\n</ul>\n<p>project/\r\n<br>ㅤfrontend/\r\n<br>ㅤBackend/</p>\n<p>이 때 관리와 자동 배포를 위해서 위와 같은 폴더를 각각의 레포지토리로 나누어야 했다.</p>\n<h3 id=\"서버\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B2%84\" aria-label=\"서버 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>서버</h3>\n<p>서비스를 만들 때 하나의 서버에서 개발, 운영 모두 이루어지는게 아녔다. (지금 생각해보면 당연한 이야기지만)</p>\n<p>크게 개발, 스테이징, 운영 서버가 있는데 스테이징을 제외한 두개의 서버만 사용하고 있다.</p>\n<h3 id=\"완성된-배포-플로우\" style=\"position:relative;\"><a href=\"#%EC%99%84%EC%84%B1%EB%90%9C-%EB%B0%B0%ED%8F%AC-%ED%94%8C%EB%A1%9C%EC%9A%B0\" aria-label=\"완성된 배포 플로우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>완성된 배포 플로우</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/edc83fafd21829a9528e5b72979db585/64d87/flowchart-deployment-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.67567567567568%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABzElEQVQoz12SS47TQBCGc1DEFdixQ4gFp8gdwg4JCTIQJLKBWUwyEmiiZMaejJ2XHdttu98fcufBhJJKcle7/q76qnreezrvzBpDtFwhmgalJEpKpJS0skUpFVweY8aYkHPKd84F7/HMvHfMUwWu+wZlPdoe7hppMdadkzvRk+Bz68VxTJ7vw+uibhCt5OvTNWmdgfVII7lNr1nlW065ncj/gpPJhPF4TG84HDKbzSirkjzb87BJefnlHd/iX6Ag2tzz5sMrpvEUJS1lWRzwaHWuqixLBoMB/X6fXlfZ6ZWupVYacimQ1uJDzJPsUmplUNoiRIVWis2+DTis0SilEUKw2+0uGTpruUs64GAcSOORR4at9rhjy0633EQVn/54srIF7/4xrKoKrXU4KG0ohGHblkhrsO4gUuuavKiQylDX9YF307LIQLQmtN9YR6kkvdFoxHw+D+Vm25x4m/Li81uuop/42hBtFrz/+Jrp4y1Ge4piH6bciR6ngvOOxd0984ebw5SFqM8MG235sZ6S6SrEtDN8/33FVuwv1kNpHaZ+XpvASV8y7H6KHhOydUGSbIiWCctkzW5bskw2PCUpq1VKkiQURXGx2Kdt/AuW2v5A0rNnBgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"flowchart-deployment-2\"\n        title=\"flowchart-deployment-2\"\n        src=\"/static/edc83fafd21829a9528e5b72979db585/fcda8/flowchart-deployment-2.png\"\n        srcset=\"/static/edc83fafd21829a9528e5b72979db585/12f09/flowchart-deployment-2.png 148w,\n/static/edc83fafd21829a9528e5b72979db585/e4a3f/flowchart-deployment-2.png 295w,\n/static/edc83fafd21829a9528e5b72979db585/fcda8/flowchart-deployment-2.png 590w,\n/static/edc83fafd21829a9528e5b72979db585/64d87/flowchart-deployment-2.png 818w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>개발 서버에는 <code>develop</code> branch 에서 커밋이 push 될 때 마다 배포가 이루어지고, 운영 서버에는 <code>master</code> branch 에 <code>develop</code> branch 가 pr 되어 merge 될 때 마다 배포가 되도록 했다.</p>\n<h2 id=\"마무리\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\" aria-label=\"마무리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마무리</h2>\n<p>리팩토링 과정에서 코드 최적화를 하며 생긴 오류들은 프로젝트에 여러 기능을 추가하고 난 후 작성할 게시글에 쓰도록 하겠다.</p>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#was-%EC%99%80-web-server-%EB%B6%84%EB%A6%AC\">WAS 와 Web Server 분리</a></p>\n<ul>\n<li><a href=\"#nginx\">NGINX</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#vue-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EA%B5%AC%EC%A1%B0-%EC%88%98%EC%A0%95\">Vue 컴포넌트 구조 수정</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%98%91%EC%97%85%EC%9D%84-%EC%9C%84%ED%95%9C-%EA%B0%9C%EB%B0%9C-%ED%99%98%EA%B2%BD\">협업을 위한 개발 환경</a></p>\n<ul>\n<li><a href=\"#api-%EC%84%A4%EA%B3%84\">API 설계</a></li>\n<li><a href=\"#dev-server-proxy\">Dev Server Proxy</a></li>\n<li><a href=\"#cicd\">CI/CD</a></li>\n<li><a href=\"#%EC%84%9C%EB%B2%84\">서버</a></li>\n<li><a href=\"#%EC%99%84%EC%84%B1%EB%90%9C-%EB%B0%B0%ED%8F%AC-%ED%94%8C%EB%A1%9C%EC%9A%B0\">완성된 배포 플로우</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%A7%88%EB%AC%B4%EB%A6%AC\">마무리</a></p>\n</li>\n</ul>","frontmatter":{"title":"food filter 프로젝트 - refactoring","date":"2022-04-25","tags":["Project"]},"fields":{"slug":"/post/food-filter-refactoring/"},"id":"00bcdd33-28f4-54d9-852b-d6fc83ddc96f"},"allMarkdownRemark":{"nodes":[{"fields":{"slug":"/post/food-filter-refactoring/"},"frontmatter":{"title":"food filter 프로젝트 - refactoring","tags":["Project"],"date":"2022-04-25","titleImage":"/img/thumbnail/api.png"},"excerpt":"4학년 1학기 ~ 여름학기 동안 food filter 웹 프로젝트를 진행했었다.…","id":"00bcdd33-28f4-54d9-852b-d6fc83ddc96f"},{"fields":{"slug":"/post/knu-lms-scheduler/"},"frontmatter":{"title":"knu lms scheduler 프로젝트","tags":["Project"],"date":"2021-12-15","titleImage":"/img/thumbnail/4.jpg"},"excerpt":"개발 동기…","id":"3f46a62d-547e-5633-a4e2-ecde543fc57a"},{"fields":{"slug":"/post/food-filter/"},"frontmatter":{"title":"food filter 프로젝트","tags":["Project"],"date":"2021-07-12","titleImage":"/img/thumbnail/1.jpg"},"excerpt":"~프로젝트가 결정되기 까지 평소 친구를 만나거나 중고거래를 할 때 낯선 장소라면 쉽게 서로를 발견하지 못하고 헤매게 되는 불편함을 겪곤 했다. 그래서 모바일 gps 를 이용한 위치공유 웹 서비스를 개발해 보고 싶다는 생각을 종종 해왔는데, 4학년…","id":"7d8da9ed-838d-59a9-bc4f-89d66f84838d"}]}},"pageContext":{"slug":"/post/food-filter-refactoring/"}},"staticQueryHashes":[]}