---
title: 'Gatsby 기술 블로그 제작기' 
titleImage: '/img/thumbnail/blog.png'
date: '2022-06-17'
tags: ['Project', 'React']
---

## 들어가는 글

블로그를 완성시키는데 꼬박 열흘이 걸렸다.

![1](1.jpg)

빨리 끝내고 싶은 마음에 요일 구분이 안갈 정도로 붙잡고 있었던 것 같다. 전에 사용하던 블로그 템플릿 [devfolio](https://elastic-meninsky-aa7c74.netlify.app/) 와 혁재형의 개인 블로그 [Nagle`s blog](https://hyeokjaelee.github.io/) 를 참고해서 속성으로 개발했는데, 이 두 블로그가 없었다면 밑바닥 부터 시작해서 1~2주는 더 걸리지 않았을까 싶다. (코드의 절반 정도는 혁재형 블로그에서 가져온거라고 해도 할말이 없을 정도로 도움을 많이 받았다.)

## 블로그 제작 동기

1. **데이터 관리** : 지금까지 naver, tistory 블로그에 글을 써왔는데, 쓰면서도 아무리 대형 플랫폼이라지만 게시글 백업을 해둬야 할것만 같고 불안했다. (나만 그런가?)
2. **TOC** : pc 와 모바일 모두 게시글에서 목차를 확인하고 싶었다. velog 는 목차 기능을 지원하지만 일정 크기 이하에서는 목차가 사라져서 보이지 않는다.
3. **포트폴리오로 페이지로 활용** : 블로그의 about 페이지를 포트폴리오 페이지로 활용하고, 포트폴리오에서 전부 담지 못하는 내용은 같은 기술 블로그의 게시글로 확인할 수 있게끔 하는 혁재형 블로그의 아이디어가 좋아 보였다.

## 디자인 작업

재대로 무언가 컨셉을 잡아야 디자인 하기도 편하고 결과물도 잘 나오는데 아이디어가 떠오르지 않았다.

![2](./2.png)

열심히 떠올리다 눈에 들어온 게 요새 항상 켜져있던 vscode 의 디자인이었다. 배경색에서 명도 차이가 나는 색으로 영역을 구분하거나 강조를 하는 디자인이 마음에 들어 전체 컨셉으로 정했다.

배경색은 다크모드를 고려해서 대비되는 두 색을 [2color](https://2colors.colorion.co) 웹에서 골라 사용했다.

적당히 디자인하고 입체감을 주기 위해 그림자를 이곳저곳에 적용해 보았는데 적당한 선을 찾기 힘들어 아예 모두 제거하고 ui 를 flat 하게 밀고 나가기로 했다.

## React 컴포넌트 설계

난 블로그를 데스크톱 앱 처럼 만들고 싶었기 때문에 헤더 `header` 와 네비게이션바 `nav` 는 항상 화면에 렌더링 되어 있고, 내용이 유동적인 요소들만 나머지 영역 `section` 에서 바뀌게끔 하고 싶어 아래와 같이 설계를 했다.

![6](./6.png)

![3](./3.png)

설계상 footer 는 페이지가 달라질 때 마다 새로 렌더링 되기 때문에, 방문자를 간편하게 체크할 수 있는 [hits](https://hits.seeyoufarm.com) 를 사용할 수 없었다. :unamused:

### gatsby-plugin-layout

Gatsby 는 정적 사이트 생성기고~ /src/pages 폴더 안의 파일명이 정적 라우팅 역할을 하는구나~ 정도만 아는 상태에서 블로그 제작을 시작했기 때문에 React 컴포넌트를 설계하고 나서 개발을 하려고 보니, 매번 렌더링 될 필요가 없는 컴포넌트들은 어떻게 처리를 해야하지..? 하며 난감해했다.

![4](./4.png)

다행히 layout 플러그인의 존재를 알고 나서야 안심했다. 사진의 빨간 선을 기준으로 위는 항상 렌더링 되어있을 요소, 아래는 url 에 따라 렌더링 될 페이지가 되겠다.

### custom-layout

개발을 하다보니 페이지마다 중복되서 사용되는 html element 의 패턴이 보여 재사용 할 레이아웃을 하나 만들었다.

1. 스크롤이 가능하도록 높이를 제한한다.
2. 반응형 크기 조절을 위해 최대 너비를 지정한다.
3. 항목이 없을 때에도 footer 가 보이지 않도록 최소 높이를 지정한다.
4. padding

![7](./7.png)

<p style="text-align:center">이해를 돕기 위한 (발)그림이다.</p>

항상 footer 와 함께 스크롤 되어야하는 내용 `contents` 들을 만든 레이아웃으로 감싸 사용한다.

```html
<!-- content-layout.jsx -->

<div className={style.layout} id="scroll">
  <div className={style.maxWidth}>
    <div className={style.minHeight}>
      <div className={style.padding}>
        {children}
      </div>
    </div>
  </div>
  <Footer data={data}/>
</div>

<!-- pages.jsx -->

<ContentLayout>
  <!-- 내용 -->
</ContentLayout>
```


## CSS Troubleshooting

블로그를 만들면서 CSS 가 이렇게 어려운 것인지 몰랐다. 그 중에서도 특히 **word-break** 속성과 관련된 문제는 CSS 기초지식이 부족했기 때문인지 원인 찾기가 정말 어려웠다.

텍스트 태그의 word-break 기본 속성값은 normal 이다. normal 은 영어의 경우 줄바꿈이 단어 단위로 일어나게 되는데 이 기본 속성이 문제를 일으켰다.

```css
section {
  display: flex;
  aside {
    width: 300px;
  }
  article {
    width: 100%;
  }
}
```

내 블로그는 **고정 요소**와 **가변 요소**가 함께 사용되기 때문에 `aside` 와 `article` 의 경우 위와 같은 방법을 사용했다.

그랬더니 만약 자식 요소에 줄바꿈이 없는 매우 긴 영어 문자열이 들어올 경우 가로 요소의 너비가 오버플로 되는 것이었다.

display:flex 에 의해 가변 요소가 줄어들었던 것이지 width 는 최대 100% 만큼 늘어날 수 있기 때문이었다.

```css
* {
  word-break: break-all;
}
```

break-all 속성을 적용해주면 문제가 해결되지만 영어 가독성이 너무 떨어지게 된다.

```css
article {
  width: calc(100% - 300px);
}
```

calc 를 이용해서 해결했다. (처음부터 calc 를 썻으면 문제가 없었겠지만 width: 100% 이 더 우아해 보여서...)

![5](./5.png)

<p style="text-align:center">(다래끼)</p>

## 마무리

참고할 레퍼런스가 든든해서 큰 문제없이 완성시킬 수 있었지만, 그만큼 깊게 공부하지 않고 가져다 쓴 코드도 많아서 추가적인 공부가 더 필요할 것 같다.

사용하면서 버그수정, 최적화 작업을 계속해나가다 보니 점점 줄어들어 이젠 거의 다 끝낸 것 같아 뿌듯했는데, 생각해보니깐 아직 seo 를 위한 작업이 남았다. :cry: